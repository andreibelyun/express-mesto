# Express Mesto
Бэкенд для проекта mesto
## Описание

В проекте задействованы две сущности: пользователи и карточки.  
С помощью библиотеки mongoose для них созданы схемы и модели.

Роуты для пользователей:  
`GET /users` — возвращает всех пользователей  
`GET /users/:userId` — возвращает пользователя по _id   
`POST /users` — создаёт пользователя  
`PATCH /users/me` — обновляет профиль   
`PATCH /users/me/avatar` — обновляет аватар

Роуты для карточек:   
`GET /cards` — возвращает все карточки  
`POST /cards` — создаёт карточку  
`DELETE /cards/:cardId` — удаляет карточку по идентификатору   
`PUT /cards/:cardId/likes` — ставит лайк карточке  
`DELETE /cards/:cardId/likes` — убирает лайк с карточки

Все маршруты, кроме страницы регистрации и логина защищены авторизацией. За авторизацию отвечает специальная мидлвэра auth, которая верифицирует токен из заголовков и при правильном токене добавляет его пейлоуд в объект запроса. 

Контроллер регистрации хеширует пароль пользователя, прежде чем сохранять его в базу. Для хеширования пароля используется модуль bcryptjs.

Контроллер логина создает JWT сроком на неделю. 

Также в проекте реализована централизованная обработка ошибок и валидация приходящих на сервер запросов. 

## Директории

`/routes` — папка с файлами роутера  
`/controllers` — папка с файлами контроллеров пользователя и карточки   
`/models` — папка с файлами описания схем пользователя и карточки

Остальные директории вспомогательные

## Запуск проекта

`npm i` – устанавливает зависимости проекта  
`npm run start` — запускает сервер  
`npm run dev` — запускает сервер с hot-reload
